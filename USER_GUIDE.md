# Руководство пользователя

## 3.1 Аутентификация и регистрация

### 3.1.1 Регистрация нового пользователя

Для создания учетной записи в системе выполните следующие действия:

1. Перейдите на страницу регистрации, нажав на ссылку "Зарегистрироваться" на странице входа или перейдя по адресу `/register`.

2. Заполните форму регистрации:
   - **Email** — введите ваш адрес электронной почты (обязательное поле, должен быть уникальным в системе).
   - **Имя пользователя** — придумайте уникальное имя (обязательное поле, минимум 3 символа).
   - **Пароль** — создайте надежный пароль (обязательное поле, минимум 8 символов).

3. Нажмите кнопку "Зарегистрироваться".

4. После успешной регистрации вы будете перенаправлены на страницу входа.

**Обработка ошибок регистрации:**
- При вводе email, который уже зарегистрирован в системе, сервер вернет ошибку 409 (Conflict). Приложение обработает её и выведет уведомление об ошибке (Рисунок 1).
- При некорректных данных (неверный формат email, короткий пароль или имя пользователя) валидация на клиенте покажет соответствующие сообщения об ошибках (Рисунок 2).

---

### 3.1.2 Вход в систему

Для доступа к личному пространству календаря выполните следующие действия:

1. Введите email и пароль, указанные при регистрации.

2. Нажмите кнопку "Войти".

3. После успешной авторизации вы будете автоматически перенаправлены на страницу профиля.

**Обработка ошибок авторизации:**
В случае ввода несуществующего email или неверного пароля, сервер вернет ошибку 401 (Unauthorized). Приложение обработает её и выведет уведомление в верхней части экрана с сообщением "Не удалось войти" (Рисунок 3).

**Особенности:**
- Access token сохраняется в локальном хранилище браузера для автоматической аутентификации в последующих запросах.
- Refresh token сохраняется в HTTP-only cookie с сроком действия 7 дней, что позволяет автоматически обновлять access token без повторного входа.

---

### 3.1.3 Выход из системы

Для выхода из системы выполните следующие действия:

1. Перейдите на страницу профиля, нажав на ссылку "Профиль" в навигационном меню.

2. Нажмите кнопку "Выйти" в правом верхнем углу страницы профиля.

3. После выхода вы будете перенаправлены на страницу входа, а все токены будут удалены из хранилища.

---

## 3.2 Работа с профилем

### 3.2.1 Просмотр профиля

Страница профиля доступна по адресу `/profile` и содержит следующую информацию:

1. **Основная информация:**
   - Аватар пользователя (генерируется автоматически на основе имени пользователя).
   - Имя пользователя (username).
   - Email адрес.
   - Дата регистрации.
   - Роль пользователя (USER или ADMIN) с соответствующим цветовым индикатором.

2. **Статистика:**
   - Количество полученных приглашений.
   - Количество созданных событий.
   - Количество принятых контактов.

**Внешний вид страницы профиля:** (Рисунок 4)

---

### 3.2.2 Редактирование профиля

Для изменения данных профиля выполните следующие действия:

1. На странице профиля нажмите кнопку "Редактировать".

2. В открывшемся модальном окне измените необходимые поля:
   - **Email** — новый адрес электронной почты (опционально).
   - **Имя пользователя** — новое имя пользователя (опционально).

3. Нажмите кнопку "Сохранить" для применения изменений.

4. После успешного обновления модальное окно закроется, и вы увидите уведомление об успешном обновлении профиля.

**Обработка ошибок:**
При ошибке обновления профиля (например, email уже занят другим пользователем) вы увидите уведомление с описанием ошибки (Рисунок 5).

---

## 3.3 Работа с событиями

### 3.3.1 Просмотр списка событий

Страница событий доступна по адресу `/events` и отображает все события пользователя, включая:
- События, созданные пользователем.
- События, на которые пользователь был приглашен.

**Функциональность страницы:**

1. **Фильтрация событий:**
   - Выберите статус события из выпадающего списка "Фильтр по статусу" (Черновик, Опубликовано, Отменено).
   - Для сброса фильтра нажмите кнопку очистки в поле фильтра.

2. **Сортировка событий:**
   - Выберите порядок сортировки из выпадающего списка "Сортировка по дате":
     - "По возрастанию" — события отображаются от ближайших к будущим.
     - "По убыванию" — события отображаются от будущих к ближайшим.

3. **Карточки событий:**
   - Каждое событие отображается в виде карточки с информацией:
     - Название события.
     - Описание события (если указано).
     - Дата и время начала.
     - Дата и время окончания.
     - Статус события (с цветовым индикатором).
     - Состояние события (Предстоящее, Текущее, Завершенное).
   - При наведении на карточку она подсвечивается для удобства навигации.

**Внешний вид страницы событий:** (Рисунок 6)

---

### 3.3.2 Создание события

Для создания нового события выполните следующие действия:

1. На странице событий нажмите кнопку "Добавить событие" в правом верхнем углу.

2. В открывшемся модальном окне заполните форму:
   - **Название** — введите название события (обязательное поле).
   - **Описание** — введите описание события (обязательное поле).
   - **Дата начала** — выберите дату и время начала события из календаря (обязательное поле).
   - **Дата окончания** — выберите дату и время окончания события из календаря (обязательное поле, должно быть после даты начала).
   - **Статус** — выберите статус события из выпадающего списка:
     - "Черновик" — событие создано, но еще не опубликовано.
     - "Опубликовано" — событие активно и видно другим пользователям.

3. Нажмите кнопку "Добавить" для создания события.

4. После успешного создания модальное окно закроется, и вы увидите уведомление об успешном создании события.

**Обработка ошибок:**
- При некорректных данных (например, дата окончания раньше даты начала) валидация покажет соответствующее сообщение об ошибке (Рисунок 7).
- При ошибке создания события вы увидите уведомление с описанием ошибки.

**Внешний вид формы создания события:** (Рисунок 8)

---

### 3.3.3 Просмотр детальной информации о событии

Для просмотра подробной информации о событии выполните следующие действия:

1. На странице событий нажмите на карточку интересующего события.

2. На странице детального просмотра отображается:
   - Полное название события.
   - Описание события.
   - Дата и время начала события.
   - Дата и время окончания события.
   - Информация о создателе события (имя пользователя и email).
   - Статус события с цветовым индикатором.
   - Состояние события (Предстоящее, Текущее, Завершенное).
   - Дата создания события.
   - Список приглашенных пользователей (в правой панели).

3. Если вы являетесь владельцем события, доступны дополнительные действия:
   - Кнопка изменения статуса (Опубликовать/Отменить/Восстановить) в зависимости от текущего статуса.
   - Кнопка "Назад" для возврата к списку событий.

**Внешний вид страницы детального просмотра события:** (Рисунок 9)

---

### 3.3.4 Редактирование события

Для редактирования события выполните следующие действия:

1. На странице событий найдите нужное событие и нажмите на иконку "Редактировать" (карандаш) в правом верхнем углу карточки события.

2. Вы будете перенаправлены на страницу детального просмотра события, где можно изменить статус события.

3. Для полного редактирования (изменение названия, описания, дат) необходимо использовать API напрямую или функциональность будет добавлена в будущих версиях.

**Примечание:** В текущей версии приложения полное редактирование событий доступно только через API. Редактирование через интерфейс будет добавлено в будущих версиях.

---

### 3.3.5 Удаление события

Для удаления события выполните следующие действия:

1. На странице событий найдите нужное событие и нажмите на иконку "Удалить" (корзина) в правом верхнем углу карточки события.

2. Подтвердите удаление в диалоговом окне (если оно появится).

3. После успешного удаления событие исчезнет из списка, и вы увидите уведомление об успешном удалении.

**Важно:** При удалении события автоматически удаляются все связанные приглашения на это событие.

---

## 3.4 Работа с приглашениями

### 3.4.1 Просмотр приглашений

Страница приглашений доступна по адресу `/invitations` и разделена на две вкладки:

1. **Вкладка "Полученные":**
   - Отображает все приглашения, которые вы получили от других пользователей.
   - Для каждого приглашения отображается:
     - Имя пользователя, отправившего приглашение.
     - Название события, на которое вас пригласили.
     - Дата создания приглашения.
     - Статус приглашения (Ожидает, Принято, Отклонено).

2. **Вкладка "Отправленные":**
   - Отображает все приглашения, которые вы отправили другим пользователям.
   - Доступен фильтр по статусу приглашений.
   - Для каждого приглашения отображается:
     - Имя пользователя, которому отправлено приглашение.
     - Название события.
     - Дата создания приглашения.
     - Статус приглашения.
     - Кнопка удаления приглашения.

**Внешний вид страницы приглашений:** (Рисунок 10)

---

### 3.4.2 Принятие приглашения

Для принятия приглашения на событие выполните следующие действия:

1. Перейдите на страницу приглашений (`/invitations`).

2. Во вкладке "Полученные" найдите приглашение со статусом "Ожидает".

3. Нажмите кнопку "Принять" на карточке приглашения.

4. После успешного принятия статус приглашения изменится на "Принято", и событие появится в вашем списке событий.

5. Вы увидите уведомление об успешном принятии приглашения.

---

### 3.4.3 Отклонение приглашения

Для отклонения приглашения на событие выполните следующие действия:

1. Перейдите на страницу приглашений (`/invitations`).

2. Во вкладке "Полученные" найдите приглашение со статусом "Ожидает".

3. Нажмите кнопку "Отказаться" на карточке приглашения.

4. После успешного отклонения статус приглашения изменится на "Отклонено".

5. Вы увидите уведомление об успешном отклонении приглашения.

---

### 3.4.4 Отправка приглашения на событие

Для отправки приглашения другому пользователю на ваше событие выполните следующие действия:

1. Перейдите на страницу детального просмотра события (`/events/{id}`).

2. В правой панели найдите раздел "Приглашенные пользователи".

3. В поле поиска введите имя пользователя или email для поиска контактов.

4. Из списка доступных контактов выберите пользователя, которого хотите пригласить.

5. Нажмите кнопку приглашения рядом с именем пользователя.

6. После успешной отправки приглашения вы увидите уведомление, а пользователь появится в списке приглашенных.

**Обработка ошибок:**
- Если пользователь уже приглашен на это событие, вы увидите соответствующее сообщение.
- Если пользователь не найден в ваших контактах, необходимо сначала добавить его в контакты.

**Внешний вид формы отправки приглашения:** (Рисунок 11)

---

### 3.4.5 Удаление отправленного приглашения

Для удаления отправленного приглашения выполните следующие действия:

1. Перейдите на страницу приглашений (`/invitations`).

2. Перейдите во вкладку "Отправленные".

3. Найдите нужное приглашение и нажмите на иконку удаления (крестик) в правом верхнем углу карточки.

4. После успешного удаления приглашение исчезнет из списка, и вы увидите уведомление.

---

## 3.5 Работа с контактами

### 3.5.1 Просмотр контактов

Страница контактов доступна по адресу `/contacts` и разделена на три вкладки:

1. **Вкладка "Мои контакты":**
   - Отображает всех пользователей, с которыми у вас установлен контакт (статус "Принято").
   - Для каждого контакта отображается:
     - Аватар пользователя.
     - Имя пользователя.
     - Email адрес.
     - Кнопка удаления контакта.

2. **Вкладка "Входящие запросы":**
   - Отображает все запросы на добавление в контакты, которые вы получили от других пользователей.
   - Для каждого запроса отображается:
     - Аватар отправителя.
     - Имя пользователя и email.
     - Дата отправки запроса.
     - Кнопки "Принять" и "Отклонить".

3. **Вкладка "Исходящие запросы":**
   - Отображает все запросы на добавление в контакты, которые вы отправили другим пользователям.
   - Для каждого запроса отображается:
     - Аватар получателя.
     - Имя пользователя и email.
     - Дата отправки запроса.
     - Статус "Ожидает ответа".
     - Кнопка отмены запроса.

**Внешний вид страницы контактов:** (Рисунок 12)

---

### 3.5.2 Отправка запроса на добавление в контакты

Для отправки запроса на добавление пользователя в контакты выполните следующие действия:

1. На странице контактов нажмите кнопку "Добавить контакт" в правом верхнем углу.

2. В открывшемся модальном окне в поле поиска введите имя пользователя или email для поиска.

3. Из списка найденных пользователей выберите нужного пользователя.

4. Нажмите кнопку "Отправить запрос".

5. После успешной отправки модальное окно закроется, и вы увидите уведомление об успешной отправке запроса.

6. Запрос появится во вкладке "Исходящие запросы" со статусом "Ожидает ответа".

**Обработка ошибок:**
- Если запрос на добавление в контакты уже существует между вами и выбранным пользователем, вы увидите уведомление с ошибкой 409 (Conflict) (Рисунок 13).
- Если вы пытаетесь отправить запрос самому себе, вы увидите уведомление об ошибке.

**Внешний вид формы добавления контакта:** (Рисунок 14)

---

### 3.5.3 Принятие запроса на добавление в контакты

Для принятия запроса на добавление в контакты выполните следующие действия:

1. Перейдите на страницу контактов (`/contacts`).

2. Перейдите во вкладку "Входящие запросы".

3. Найдите нужный запрос и нажмите кнопку "Принять" на карточке запроса.

4. После успешного принятия запрос переместится во вкладку "Мои контакты", и вы увидите уведомление об успешном добавлении контакта.

---

### 3.5.4 Отклонение запроса на добавление в контакты

Для отклонения запроса на добавление в контакты выполните следующие действия:

1. Перейдите на страницу контактов (`/contacts`).

2. Перейдите во вкладку "Входящие запросы".

3. Найдите нужный запрос и нажмите кнопку "Отклонить" на карточке запроса.

4. После успешного отклонения запрос исчезнет из списка, и вы увидите уведомление.

---

### 3.5.5 Удаление контакта

Для удаления контакта из списка выполните следующие действия:

1. Перейдите на страницу контактов (`/contacts`).

2. Перейдите во вкладку "Мои контакты".

3. Найдите нужный контакт и нажмите на иконку удаления (крестик) в правом верхнем углу карточки контакта.

4. Подтвердите удаление в диалоговом окне.

5. После успешного удаления контакт исчезнет из списка, и вы увидите уведомление.

---

## 3.6 Административные функции

### 3.6.1 Управление пользователями (только для администраторов)

Страница управления пользователями доступна только пользователям с ролью ADMIN по адресу `/admin/users`.

**Доступ к странице:**
- На странице профиля администраторы видят кнопку "Управление пользователями".
- При переходе на страницу выполняется проверка роли — если пользователь не является администратором, происходит автоматический редирект на страницу профиля.

**Функциональность страницы:**

1. **Просмотр списка пользователей:**
   - Отображается таблица со всеми пользователями системы.
   - Для каждого пользователя отображается:
     - Имя пользователя.
     - Email адрес.
     - Дата регистрации.
     - Текущая роль (с цветовым индикатором).

2. **Изменение роли пользователя:**
   - В колонке "Изменить роль" доступен выпадающий список для выбора роли (Пользователь или Администратор).
   - При изменении роли вы увидите уведомление об успешном обновлении.
   - Системный администратор (admin@system.local) и текущий пользователь защищены от изменения роли.

**Обработка ошибок:**
- При попытке изменить роль системного администратора или свою собственную роль вы увидите соответствующее уведомление об ошибке (Рисунок 15).

**Внешний вид страницы управления пользователями:** (Рисунок 16)

---

## 3.7 Навигация по приложению

### 3.7.1 Навигационное меню

В левой части экрана (на десктопе) или в выдвигающемся меню (на мобильных устройствах) доступны следующие разделы:

1. **События** — переход на страницу списка событий (`/events`).
2. **Приглашения** — переход на страницу приглашений (`/invitations`).
3. **Контакты** — переход на страницу контактов (`/contacts`).
4. **Профиль** — переход на страницу профиля (`/profile`).

**Особенности:**
- Навигационное меню доступно только авторизованным пользователям.
- На мобильных устройствах меню скрывается и открывается по нажатию на кнопку меню в заголовке.

---

### 3.7.2 Заголовок приложения

В верхней части экрана отображается заголовок приложения с:
- Названием приложения или логотипом.
- Именем текущего пользователя.
- Кнопкой открытия/закрытия навигационного меню (на мобильных устройствах).

---

## 3.8 Уведомления и обратная связь

### 3.8.1 Система уведомлений

Приложение использует систему уведомлений для информирования пользователя о результатах операций:

- **Успешные операции** — отображаются зеленым цветом с иконкой успеха.
- **Ошибки** — отображаются красным цветом с иконкой ошибки.
- **Информационные сообщения** — отображаются синим цветом.

Уведомления автоматически исчезают через несколько секунд или могут быть закрыты вручную.

**Примеры уведомлений:**
- "Вы успешно вошли в систему" — при успешной авторизации.
- "Событие успешно создано" — при создании события.
- "Приглашение принято" — при принятии приглашения.
- "Не удалось войти" — при ошибке авторизации.

---

### 3.8.2 Индикаторы загрузки

Во время выполнения операций (загрузка данных, отправка запросов) отображаются индикаторы загрузки:

- **Skeleton (скелетон)** — отображается на месте контента во время загрузки данных.
- **Spinner (крутящийся индикатор)** — отображается на кнопках во время выполнения действий.

Это позволяет пользователю понять, что приложение обрабатывает запрос и не зависло.

---

## 3.9 Обработка ошибок

### 3.9.1 Ошибки авторизации

При ошибках авторизации (401 Unauthorized):
- Вы автоматически перенаправляетесь на страницу входа.
- Все сохраненные токены удаляются из хранилища.
- Отображается уведомление об ошибке авторизации.

---

### 3.9.2 Ошибки валидации

При ошибках валидации данных:
- Поля формы подсвечиваются красным цветом.
- Под полями отображаются сообщения об ошибках.
- Форма не отправляется до исправления ошибок.

**Примеры сообщений об ошибках:**
- "Email обязателен" — если поле email не заполнено.
- "Пароль должен быть не менее 8 символов" — если пароль слишком короткий.
- "Время окончания события не может быть раньше времени начала" — если даты указаны некорректно.

---

### 3.9.3 Ошибки сервера

При ошибках сервера (500, 503 и т.д.):
- Отображается уведомление с описанием ошибки.
- Пользователь может повторить попытку выполнения действия.

---

### 3.9.4 Ошибки 404 (Не найдено)

При попытке доступа к несуществующей странице или ресурсу:
- Отображается страница ошибки 404.
- Предлагается вернуться на главную страницу или использовать навигационное меню.

---

## 3.10 Советы по использованию

### 3.10.1 Эффективная работа с событиями

- Используйте фильтры и сортировку для быстрого поиска нужных событий.
- Создавайте события заранее со статусом "Черновик", а затем публикуйте их.
- Регулярно проверяйте приглашения, чтобы не пропустить важные события.

---

### 3.10.2 Работа с контактами

- Добавляйте в контакты пользователей, с которыми часто планируете совместные события.
- Это упростит процесс отправки приглашений — контакты будут доступны в списке при создании приглашения.

---

### 3.10.3 Безопасность

- Не передавайте свои учетные данные (email и пароль) третьим лицам.
- Регулярно проверяйте список своих событий и приглашений.
- При подозрении на несанкционированный доступ смените пароль через редактирование профиля.

---

## 3.11 Часто задаваемые вопросы (FAQ)

**Вопрос:** Как восстановить доступ к аккаунту, если забыл пароль?
**Ответ:** В текущей версии приложения функция восстановления пароля не реализована. Обратитесь к администратору системы для сброса пароля.

**Вопрос:** Можно ли изменить email после регистрации?
**Ответ:** Да, вы можете изменить email через редактирование профиля на странице профиля.

**Вопрос:** Что происходит с приглашениями при удалении события?
**Ответ:** Все приглашения на удаленное событие автоматически удаляются из системы.

**Вопрос:** Можно ли отменить отправленное приглашение?
**Ответ:** Да, вы можете удалить отправленное приглашение во вкладке "Отправленные" на странице приглашений.

**Вопрос:** Как узнать, кто приглашен на мое событие?
**Ответ:** Перейдите на страницу детального просмотра события — в правой панели отображается список всех приглашенных пользователей.

---

## 3.12 Техническая поддержка

При возникновении проблем с использованием приложения:

1. Проверьте подключение к интернету.
2. Обновите страницу в браузере (F5 или Ctrl+R).
3. Очистите кэш браузера и попробуйте снова.
4. Если проблема сохраняется, обратитесь к администратору системы с описанием проблемы и скриншотом ошибки (если возможно).

